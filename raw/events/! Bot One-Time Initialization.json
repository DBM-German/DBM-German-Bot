{
    "name": "! Bot One-Time Initialization",
    "temp": "",
    "event-type": "48",
    "_id": "YyWfH",
    "actions": [
        {
            "behavior": "0",
            "interpretation": "1",
            "code": "console.log(\"Starte Initialisierung...\");",
            "storage": "0",
            "varName": "",
            "name": "Run Script"
        },
        {
            "comment": "Override internal functions | Überschreibe interne Funktionen",
            "actions": [
                {
                    "behavior": "0",
                    "interpretation": "1",
                    "code": "// Override the default time data generator\n// Überschreibe den standardmäßigen Zeitangaben-Generator\n\nActions.generateTimeString = function (milliseconds) {\n    let remaining = milliseconds;\n    const times = [];\n\n    const days = Math.floor(remaining / 60 / 60 / 24);\n    if (days > 0) {\n        remaining -= days * 60 * 60 * 24;\n        times.push(days + (days === 1 ? \" Tag\" : \" Tage\"));\n    }\n    const hours = Math.floor(remaining / 60 / 60);\n    if (hours > 0) {\n        remaining -= hours * 60 * 60;\n        times.push(hours + (hours === 1 ? \" Stunde\" : \" Stunden\"));\n    }\n    const minutes = Math.floor(remaining / 60);\n    if (minutes > 0) {\n        remaining -= minutes * 60;\n        times.push(minutes + (minutes === 1 ? \" Minute\" : \" Minuten\"));\n    }\n    const seconds = Math.floor(remaining);\n    if (seconds > 0) {\n        remaining -= seconds;\n        times.push(seconds + (seconds === 1 ? \" Sekunde\" : \" Sekunden\"));\n    }\n\n    let result = \"\";\n    if (times.length === 1) {\n        result = times[0];\n    } else if (times.length === 2) {\n        result = times[0] + \" und \" + times[1];\n    } else if (times.length === 3) {\n        result = times[0] + \", \" + times[1] + \" und \" + times[2];\n    } else if (times.length === 4) {\n        result = times[0] + \", \" + times[1] + \", \" + times[2] + \" und \" + times[3];\n    }\n    return result;\n}",
                    "storage": "0",
                    "varName": "",
                    "name": "Run Script"
                },
                {
                    "behavior": "0",
                    "interpretation": "1",
                    "code": "// Override Transform List action\n// Überschreibe Transform List-Aktion\n\nconst Actions = this.getDBM().Actions;\n\nActions[\"Transform List\"] = async (cache) => {\n    const data = cache.actions[cache.index];\n    const list = await this.getListFromData(data.list, data.varName, cache);\n\n    let result = [];\n    const code = data.transform;\n    const nullVal = data.null;\n    let defaultVal;\n\n    try {\n        defaultVal = this.eval(nullVal, cache);\n    } catch (e) {\n        this.displayError(data, cache, e);\n        defaultVal = \"\";\n    }\n\n    for (let i = 0; i < list.length; i++) {\n        try {\n            const item = list[i];\n            const val = this.eval.call(\n                {\n                    ...Actions,\n                    ...{\n                        transformListIndex: i,\n                        transformListItem: item,\n                        transformListArray: list\n                    }\n                },\n                \"const index = this.transformListIndex; const item = this.transformListItem; const list = this.transformListArray;\\n\" + code,\n                cache\n            );\n\n            if (val) {\n                result.push(val);\n            } else if (defaultVal) {\n                result.push(defaultVal);\n            }\n        } catch (e) {\n            this.displayError(data, cache, e);\n            if (defaultVal) {\n                result.push(defaultVal);\n            }\n        }\n    }\n\n    if (result) {\n        const varName2 = this.evalMessage(data.varName2, cache);\n        const storage2 = parseInt(data.storage, 10);\n        this.storeValue(result, storage2, varName2, cache);\n    }\n\n    this.callNextAction(cache);\n};\n\nActions[\"Transform List\"].bind(Actions);",
                    "storage": "0",
                    "varName": "",
                    "name": "Run Script"
                }
            ],
            "name": "Action Container"
        },
        {
            "comment": "Create global variables | Erstelle globale Variablen",
            "actions": [
                {
                    "storage": "1",
                    "varName": "true",
                    "changeType": "0",
                    "value": "true",
                    "name": "Control Variable"
                },
                {
                    "storage": "3",
                    "varName": "version",
                    "changeType": "0",
                    "value": "\"3.0-beta\"",
                    "name": "Control Variable"
                },
                {
                    "storage": "3",
                    "varName": "debug",
                    "changeType": "0",
                    "value": "client.user.id == \"724335784798322833\"",
                    "name": "Control Variable"
                },
                {
                    "storage": "3",
                    "varName": "default-color",
                    "changeType": "0",
                    "value": "\"fff700\"",
                    "name": "Control Variable"
                },
                {
                    "storage": "3",
                    "varName": "success-color",
                    "changeType": "0",
                    "value": "\"3fff3f\"",
                    "name": "Control Variable"
                },
                {
                    "storage": "3",
                    "varName": "failure-color",
                    "changeType": "0",
                    "value": "\"ff3f3f\"",
                    "name": "Control Variable"
                },
                {
                    "storage": "3",
                    "varName": "info-color",
                    "changeType": "0",
                    "value": "\"3f3fff\"",
                    "name": "Control Variable"
                },
                {
                    "storage": "3",
                    "varName": "warning-color",
                    "changeType": "0",
                    "value": "\"ffff3f\"",
                    "name": "Control Variable"
                },
                {
                    "storage": "3",
                    "varName": "main-server-id",
                    "changeType": "0",
                    "value": "globalVars(\"debug\") ? \"724330774257729647\" : \"488722832201613344\"",
                    "name": "Control Variable"
                },
                {
                    "storage": "3",
                    "varName": "team-server-id",
                    "changeType": "0",
                    "value": "\"533618507699585035\"",
                    "name": "Control Variable"
                },
                {
                    "storage": "3",
                    "varName": "fake-server-id",
                    "changeType": "0",
                    "value": "\"731837587836371024\"",
                    "name": "Control Variable"
                },
                {
                    "storage": "3",
                    "varName": "main-welcome-goodbye-channel-id",
                    "changeType": "0",
                    "value": "globalVars(\"debug\") ? \"724330774966435852\" : \"488736789092237322\"",
                    "name": "Control Variable"
                },
                {
                    "storage": "3",
                    "varName": "team-welcome-goodbye-channel-id",
                    "changeType": "0",
                    "value": "globalVars(\"debug\") ? \"756233531356610580\" : \"559419622667845633\"",
                    "name": "Control Variable"
                },
                {
                    "storage": "3",
                    "varName": "rule-channel-id",
                    "changeType": "0",
                    "value": "globalVars(\"debug\") ? \"724331029359493120\" : \"514896934411042834\"",
                    "name": "Control Variable"
                },
                {
                    "storage": "3",
                    "varName": "serverlist-channel-id",
                    "changeType": "0",
                    "value": "globalVars(\"debug\") ? \"724331017401532446\" : \"488734739000328202\"",
                    "name": "Control Variable"
                },
                {
                    "storage": "3",
                    "varName": "faq-channel-id",
                    "changeType": "0",
                    "value": "globalVars(\"debug\") ? \"724331079619706910\" : \"547530904453775390\"",
                    "name": "Control Variable"
                },
                {
                    "storage": "3",
                    "varName": "hidden-role-id",
                    "changeType": "0",
                    "value": "globalVars(\"debug\") ? \"724335094281666642\" : \"663781677016809504\"",
                    "name": "Control Variable"
                },
                {
                    "behavior": "0",
                    "interpretation": "1",
                    "code": "// Convert internal command objects to an usable DBM variable\n// Konvertiere interne Befehlsobjekte zu einer nutzbaren DBM-Variable\n\nconst { $slash: slashCmds, $cmds: textCmds } = this.getDBM().Bot;\n\nlet commands = [];\n\nfor(let cmds of [ slashCmds, textCmds ]) {\n    for(let { name, description, parameters, comType: type } of Object.values(cmds)) {\n        commands.push({ name, description, parameters, type  });\n    }\n}\n\ncommands;",
                    "storage": "3",
                    "varName": "commands",
                    "name": "Run Script"
                },
                {
                    "behavior": "0",
                    "interpretation": "1",
                    "code": "// Create an object with all command types\n// Erstelle ein Objekt mit allen Befehlsarten\n\nconst TYPES = {\n    TEXT: \"0\",\n    INCLUDES_WORD: \"1\",\n    REGEX: \"2\",\n    ANY_MESSAGE: \"3\",\n    SLASH: \"4\",\n    USER_MENU: \"5\",\n    MSG_MENU: \"6\",\n};\n\nTYPES;",
                    "storage": "3",
                    "varName": "commandTypes",
                    "name": "Run Script"
                },
                {
                    "behavior": "0",
                    "interpretation": "1",
                    "code": "// Create an object with the names of all command types\n// Erstelle ein Objekt mit den Namen aller Befehlarten\n\nconst TYPES = globalVars(\"commandTypes\");\nconst NAMES = {};\n\nNAMES[TYPES.TEXT] = \"Text Command\";\nNAMES[TYPES.INCLUDES_WORD] = \"Includes Word\";\nNAMES[TYPES.REGEX] = \"Regular Expression\";\nNAMES[TYPES.ANY_MESSAGE] = \"Any Message\";\nNAMES[TYPES.SLASH] = \"Slash Command\";\nNAMES[TYPES.USER_MENU] = \"User Menu Command\";\nNAMES[TYPES.MSG_MENU] = \"Message Menu\";\n\nNAMES;",
                    "storage": "3",
                    "varName": "commandTypeNames",
                    "name": "Run Script"
                },
                {
                    "behavior": "0",
                    "interpretation": "1",
                    "code": "// Create a function to resolve command types to names\n// Erstelle eine Funktion, um Befehlsarten in Namen aufzulösen\n\nconst TYPES = globalVars(\"commandTypes\");\nconst NAMES = globalVars(\"commandTypeNames\");\n\nconst resolveCommandType = function(commandType) {\n    if(!Object.values(TYPES).includes(commandType)) return \"Manual Command\";\n    return NAMES[commandType];\n}\n\nresolveCommandType;",
                    "storage": "3",
                    "varName": "resolveCommandType",
                    "name": "Run Script"
                },
                {
                    "behavior": "0",
                    "interpretation": "1",
                    "code": "// Create a function to break texts if needed and replace the end with break characters\n// Erstelle eine Funktion, um Texte falls nötig abzubrechen und das Ende mit Abbruchzeichen zu ersetzen\n\nconst breakText = function(text, maxLength, breakCharacters = \"...\") {\n    if(text?.length > maxLength) return text.substring(0, maxLength - breakCharacters.length) + breakCharacters;\n\n    return text;\n} \n\nbreakText;",
                    "storage": "3",
                    "varName": "breakText",
                    "name": "Run Script"
                },
                {
                    "storage": "3",
                    "varName": "replacement-nicknames",
                    "name": "Create List"
                },
                {
                    "storage": "1",
                    "varName": "true",
                    "comparison": "1",
                    "value": "true",
                    "branch": {
                        "iftrue": "99",
                        "iffalse": "0",
                        "iftrueActions": [
                            {
                                "startNum": "1",
                                "endNum": "11",
                                "increment": "1",
                                "tempVarName": "iteration",
                                "type": "true",
                                "actions": [
                                    {
                                        "storage": "1",
                                        "varName": "iteration",
                                        "branches": [
                                            {
                                                "comparison": "1",
                                                "value": "1",
                                                "actions": [
                                                    {
                                                        "storage": "3",
                                                        "varName": "replacement-nicknames",
                                                        "addType": "0",
                                                        "position": "",
                                                        "value": "\"Hans-Peter\"",
                                                        "name": "Add Item to List"
                                                    }
                                                ]
                                            },
                                            {
                                                "comparison": "1",
                                                "value": "2",
                                                "actions": [
                                                    {
                                                        "storage": "3",
                                                        "varName": "replacement-nicknames",
                                                        "addType": "0",
                                                        "position": "",
                                                        "value": "\"Kevin\"",
                                                        "name": "Add Item to List"
                                                    }
                                                ]
                                            },
                                            {
                                                "comparison": "1",
                                                "value": "3",
                                                "actions": [
                                                    {
                                                        "storage": "3",
                                                        "varName": "replacement-nicknames",
                                                        "addType": "0",
                                                        "position": "",
                                                        "value": "\"Frederik\"",
                                                        "name": "Add Item to List"
                                                    }
                                                ]
                                            },
                                            {
                                                "comparison": "1",
                                                "value": "4",
                                                "actions": [
                                                    {
                                                        "storage": "3",
                                                        "varName": "replacement-nicknames",
                                                        "addType": "0",
                                                        "position": "",
                                                        "value": "\"Pascal\"",
                                                        "name": "Add Item to List"
                                                    }
                                                ]
                                            },
                                            {
                                                "comparison": "1",
                                                "value": "5",
                                                "actions": [
                                                    {
                                                        "storage": "3",
                                                        "varName": "replacement-nicknames",
                                                        "addType": "0",
                                                        "position": "",
                                                        "value": "\"Detlef\"",
                                                        "name": "Add Item to List"
                                                    }
                                                ]
                                            },
                                            {
                                                "comparison": "1",
                                                "value": "6",
                                                "actions": [
                                                    {
                                                        "storage": "3",
                                                        "varName": "replacement-nicknames",
                                                        "addType": "0",
                                                        "position": "",
                                                        "value": "\"Jürgen\"",
                                                        "name": "Add Item to List"
                                                    }
                                                ]
                                            },
                                            {
                                                "comparison": "1",
                                                "value": "7",
                                                "actions": [
                                                    {
                                                        "storage": "3",
                                                        "varName": "replacement-nicknames",
                                                        "addType": "0",
                                                        "position": "",
                                                        "value": "\"Horst\"",
                                                        "name": "Add Item to List"
                                                    }
                                                ]
                                            },
                                            {
                                                "comparison": "1",
                                                "value": "8",
                                                "actions": [
                                                    {
                                                        "storage": "3",
                                                        "varName": "replacement-nicknames",
                                                        "addType": "0",
                                                        "position": "",
                                                        "value": "\"Günter\"",
                                                        "name": "Add Item to List"
                                                    }
                                                ]
                                            },
                                            {
                                                "comparison": "1",
                                                "value": "9",
                                                "actions": [
                                                    {
                                                        "storage": "3",
                                                        "varName": "replacement-nicknames",
                                                        "addType": "0",
                                                        "position": "",
                                                        "value": "\"Konstantin\"",
                                                        "name": "Add Item to List"
                                                    }
                                                ]
                                            },
                                            {
                                                "comparison": "1",
                                                "value": "10",
                                                "actions": [
                                                    {
                                                        "storage": "3",
                                                        "varName": "replacement-nicknames",
                                                        "addType": "0",
                                                        "position": "",
                                                        "value": "\"Valentin\"",
                                                        "name": "Add Item to List"
                                                    }
                                                ]
                                            },
                                            {
                                                "comparison": "1",
                                                "value": "11",
                                                "actions": [
                                                    {
                                                        "storage": "3",
                                                        "varName": "replacement-nicknames",
                                                        "addType": "0",
                                                        "position": "",
                                                        "value": "\"Rüdiger\"",
                                                        "name": "Add Item to List"
                                                    }
                                                ]
                                            }
                                        ],
                                        "name": "Multi-Check Variable"
                                    }
                                ],
                                "name": "Loop Through Numbers"
                            }
                        ]
                    },
                    "name": "Check Variable"
                },
                {
                    "storage": "1",
                    "varName": "true",
                    "comparison": "1",
                    "value": "false",
                    "branch": {
                        "iftrue": "0",
                        "iffalse": "99",
                        "iffalseActions": [
                            {
                                "startNum": "1",
                                "endNum": "11",
                                "increment": "1",
                                "tempVarName": "iteration",
                                "type": "true",
                                "actions": [
                                    {
                                        "storage": "1",
                                        "varName": "iteration",
                                        "branches": [
                                            {
                                                "comparison": "1",
                                                "value": "1",
                                                "actions": [
                                                    {
                                                        "storage": "3",
                                                        "varName": "replacement-nicknames",
                                                        "addType": "0",
                                                        "position": "",
                                                        "value": "\"Chantal\"",
                                                        "name": "Add Item to List"
                                                    }
                                                ]
                                            },
                                            {
                                                "comparison": "1",
                                                "value": "2",
                                                "actions": [
                                                    {
                                                        "storage": "3",
                                                        "varName": "replacement-nicknames",
                                                        "addType": "0",
                                                        "position": "",
                                                        "value": "\"Xanthippe\"",
                                                        "name": "Add Item to List"
                                                    }
                                                ]
                                            },
                                            {
                                                "comparison": "1",
                                                "value": "3",
                                                "actions": [
                                                    {
                                                        "storage": "3",
                                                        "varName": "replacement-nicknames",
                                                        "addType": "0",
                                                        "position": "",
                                                        "value": "\"Mathilda\"",
                                                        "name": "Add Item to List"
                                                    }
                                                ]
                                            },
                                            {
                                                "comparison": "1",
                                                "value": "4",
                                                "actions": [
                                                    {
                                                        "storage": "3",
                                                        "varName": "replacement-nicknames",
                                                        "addType": "0",
                                                        "position": "",
                                                        "value": "\"Tiffany\"",
                                                        "name": "Add Item to List"
                                                    }
                                                ]
                                            },
                                            {
                                                "comparison": "1",
                                                "value": "5",
                                                "actions": [
                                                    {
                                                        "storage": "3",
                                                        "varName": "replacement-nicknames",
                                                        "addType": "0",
                                                        "position": "",
                                                        "value": "\"Frieda\"",
                                                        "name": "Add Item to List"
                                                    }
                                                ]
                                            },
                                            {
                                                "comparison": "1",
                                                "value": "6",
                                                "actions": [
                                                    {
                                                        "storage": "3",
                                                        "varName": "replacement-nicknames",
                                                        "addType": "0",
                                                        "position": "",
                                                        "value": "\"Greta\"",
                                                        "name": "Add Item to List"
                                                    }
                                                ]
                                            },
                                            {
                                                "comparison": "1",
                                                "value": "7",
                                                "actions": [
                                                    {
                                                        "storage": "3",
                                                        "varName": "replacement-nicknames",
                                                        "addType": "0",
                                                        "position": "",
                                                        "value": "\"Cheyenne\"",
                                                        "name": "Add Item to List"
                                                    }
                                                ]
                                            },
                                            {
                                                "comparison": "1",
                                                "value": "8",
                                                "actions": [
                                                    {
                                                        "storage": "3",
                                                        "varName": "replacement-nicknames",
                                                        "addType": "0",
                                                        "position": "",
                                                        "value": "\"Klothilde\"",
                                                        "name": "Add Item to List"
                                                    }
                                                ]
                                            },
                                            {
                                                "comparison": "1",
                                                "value": "9",
                                                "actions": [
                                                    {
                                                        "storage": "3",
                                                        "varName": "replacement-nicknames",
                                                        "addType": "0",
                                                        "position": "",
                                                        "value": "\"Jacqueline\"",
                                                        "name": "Add Item to List"
                                                    }
                                                ]
                                            },
                                            {
                                                "comparison": "1",
                                                "value": "10",
                                                "actions": [
                                                    {
                                                        "storage": "3",
                                                        "varName": "replacement-nicknames",
                                                        "addType": "0",
                                                        "position": "",
                                                        "value": "\"Theresa\"",
                                                        "name": "Add Item to List"
                                                    }
                                                ]
                                            },
                                            {
                                                "comparison": "1",
                                                "value": "11",
                                                "actions": [
                                                    {
                                                        "storage": "3",
                                                        "varName": "replacement-nicknames",
                                                        "addType": "0",
                                                        "position": "",
                                                        "value": "\"Carlotta\"",
                                                        "name": "Add Item to List"
                                                    }
                                                ]
                                            }
                                        ],
                                        "name": "Multi-Check Variable"
                                    }
                                ],
                                "name": "Loop Through Numbers"
                            }
                        ]
                    },
                    "name": "Check Variable"
                },
                {
                    "storage": "3",
                    "varName": "advertisement-regex",
                    "changeType": "0",
                    "value": "/([-a-zA-Z0-9@:%_\\+.~#?&/=]{2,256}\\.[a-z]{2,64}\\b(\\/[-a-zA-Z0-9@:%_\\+.~#?&/=]*)?(?<!tenor\\.com\\2?|giphy\\.com\\2?))|(\\.gg\\/[-a-zA-Z0-9@:%_\\+.~#?&/=]+)/i",
                    "name": "Control Variable"
                }
            ],
            "name": "Action Container"
        },
        {
            "comment": "Create global action-specific variables | Erstelle globale aktionsspezifische Variablen",
            "actions": [
                {
                    "behavior": "0",
                    "interpretation": "1",
                    "code": "// Create an object with all notification role descriptions\n// Erstelle ein Objekt mit allen Benachrichtigungsrollen-Beschreibungen\n\nconst DESCRIPTIONS = {};\n\nDESCRIPTIONS[\"helfer\"] = `\nAndere Nutzer können dich anpingen, wenn sie Hilfe benötigen.\n`;\nDESCRIPTIONS[\"giveaways\"] = `\nBei neuen Giveaways (keinen Freebies) wirst du benachrichtigt.\n`;\nDESCRIPTIONS[\"news\"] = `\nWir halten dich auf dem aktuellen Stand, was DBM und diesen Server angeht.\n`;\nDESCRIPTIONS[\"rawdata\"] = `\nAndere Nutzer können sich bei dir bezüglich Raw Datas melden.\n`;\n\nDESCRIPTIONS;",
                    "storage": "3",
                    "varName": "/benachrichtigungen-roles",
                    "name": "Run Script"
                }
            ],
            "name": "Action Container"
        },
        {
            "behavior": "0",
            "interpretation": "1",
            "code": "console.log(\"Initialisierung beendet.\");",
            "storage": "0",
            "varName": "",
            "name": "Run Script"
        }
    ]
}