{
    "name": "Werbung pr端fen",
    "temp": "",
    "event-type": "0",
    "_id": "nGjuv",
    "actions": [
        {
            "server": "0",
            "varName": "",
            "info": "1",
            "storage": "1",
            "varName2": "serverId",
            "name": "Store Server Info"
        },
        {
            "storage": "1",
            "varName": "serverId",
            "comparison": "1",
            "value": "globalVars(\"main-server-id\")",
            "branch": {
                "iftrue": "0",
                "iffalse": "1"
            },
            "name": "Check Variable"
        },
        {
            "storage": "1",
            "varName": "member",
            "comparison": "0",
            "value": "",
            "branch": {
                "iftrue": "99",
                "iffalse": "0",
                "iftrueActions": [
                    {
                        "member": "2",
                        "varName": "member",
                        "info": "2",
                        "storage": "1",
                        "varName2": "username",
                        "name": "Store Member Info"
                    },
                    {
                        "member": "2",
                        "varName": "member",
                        "info": "3",
                        "storage": "1",
                        "varName2": "displayname",
                        "name": "Store Member Info"
                    },
                    {
                        "member": "2",
                        "varName": "member",
                        "info": "14",
                        "storage": "1",
                        "varName2": "game-status",
                        "name": "Store Member Info"
                    },
                    {
                        "member": "2",
                        "varName": "member",
                        "info": "30",
                        "storage": "1",
                        "varName2": "custom-status",
                        "name": "Store Member Info"
                    },
                    {
                        "behavior": "0",
                        "interpretation": "1",
                        "code": "const regex = globalVars(\"advertisement-regex\");\n\nlet username = regex.test(tempVars(\"username\"));\nlet displayname = regex.test(tempVars(\"displayname\"));\nlet gameStatus = regex.test(tempVars(\"game-status\"));\nlet customStatus = regex.test(tempVars(\"custom-status\"));\n\nusername || displayname || gameStatus || customStatus;",
                        "storage": "1",
                        "varName": "regex-check",
                        "name": "Run Script"
                    },
                    {
                        "storage": "1",
                        "varName": "regex-check",
                        "comparison": "1",
                        "value": "true",
                        "branch": {
                            "iftrue": "4",
                            "iffalse": "4",
                            "iftrueVal": "hide-member",
                            "iffalseVal": "show-member"
                        },
                        "name": "Check Variable"
                    },
                    {
                        "name": "End Action Sequence"
                    },
                    {
                        "anchorName": "hide-member",
                        "name": "Action Anchor"
                    },
                    {
                        "member": "2",
                        "varName2": "member",
                        "role": "101",
                        "varName": "${globalVars(\"hidden-role-id\")}",
                        "reason": "Werbung",
                        "name": "Add Member Role"
                    },
                    {
                        "name": "End Action Sequence"
                    },
                    {
                        "anchorName": "show-member",
                        "name": "Action Anchor"
                    },
                    {
                        "member": "2",
                        "varName2": "member",
                        "role": "101",
                        "varName": "${globalVars(\"hidden-role-id\")}",
                        "reason": "Keine Werbung",
                        "name": "Remove Member Role"
                    }
                ]
            },
            "name": "Check Variable"
        },
        {
            "storage": "1",
            "varName": "message",
            "comparison": "0",
            "value": "",
            "branch": {
                "iftrue": "99",
                "iffalse": "0",
                "iftrueActions": [
                    {
                        "message": "1",
                        "varName": "message",
                        "info": "3",
                        "storage": "1",
                        "varName2": "author",
                        "name": "Store Message Info"
                    },
                    {
                        "message": "1",
                        "varName": "message",
                        "info": "4",
                        "storage": "1",
                        "varName2": "channel",
                        "name": "Store Message Info"
                    },
                    {
                        "message": "1",
                        "varName": "message",
                        "info": "2",
                        "storage": "1",
                        "varName2": "text",
                        "name": "Store Message Info"
                    },
                    {
                        "storage": "1",
                        "varName": "regex",
                        "changeType": "0",
                        "value": "globalVars(\"advertisement-regex\")",
                        "name": "Control Variable"
                    },
                    {
                        "source": "vdjKu",
                        "type": "true",
                        "name": "Call Command/Event"
                    },
                    {
                        "storage": "1",
                        "varName": "matches",
                        "comparison": "10",
                        "value": "0",
                        "branch": {
                            "iftrue": "0",
                            "iffalse": "1"
                        },
                        "name": "Check Variable"
                    },
                    {
                        "list": "7",
                        "varName": "matches",
                        "tempVarName": "match",
                        "type": "true",
                        "actions": [
                            {
                                "storage": "1",
                                "varName": "match",
                                "comparison": "6",
                                "value": "(https?)?(discord)?\\.gg\\/[-a-zA-Z0-9@:%_\\+.~#?&/=]+",
                                "branch": {
                                    "iftrue": "0",
                                    "iffalse": "3",
                                    "iffalseVal": "3"
                                },
                                "name": "Check Variable"
                            },
                            {
                                "anchorName": "take-action",
                                "name": "Go To Action Anchor"
                            },
                            {
                                "source": "vkigl",
                                "type": "true",
                                "name": "Call Command/Event"
                            },
                            {
                                "name": "End Action Sequence"
                            },
                            {
                                "storage": "1",
                                "varName": "match",
                                "comparison": "6",
                                "value": "(https?)?discord(app)?\\.com\\/invite\\/[-a-zA-Z0-9@:%_\\+.~#?&/=]+",
                                "branch": {
                                    "iftrue": "0",
                                    "iffalse": "3",
                                    "iffalseVal": "3"
                                },
                                "name": "Check Variable"
                            },
                            {
                                "anchorName": "take-action",
                                "name": "Go To Action Anchor"
                            },
                            {
                                "source": "vkigl",
                                "type": "true",
                                "name": "Call Command/Event"
                            },
                            {
                                "name": "End Action Sequence"
                            },
                            {
                                "behavior": "0",
                                "interpretation": "1",
                                "code": "let url = new URL(tempVars(\"match\"));\nlet hostParts = url.hostname.split(\".\");\n\n// Only process the top and second level domain (e.g. \"www.youtube.com\" will get \"youtube.com\")\n// Nur die Top und Second Level Domain verarbeiten (Bsp.: \"www.youtube.com\" wird zu \"youtube.com\")\nhostParts.slice(-2, hostParts.length).join(\".\");",
                                "storage": "1",
                                "varName": "item",
                                "name": "Run Script"
                            },
                            {
                                "storage": "1",
                                "varName": "list",
                                "changeType": "0",
                                "value": "globalVars(\"advertisement-exceptions\")",
                                "name": "Control Variable"
                            },
                            {
                                "source": "zZHod",
                                "type": "true",
                                "name": "Call Command/Event"
                            },
                            {
                                "storage": "1",
                                "varName": "position",
                                "comparison": "4",
                                "value": "-1",
                                "branch": {
                                    "iftrue": "0",
                                    "iffalse": "1"
                                },
                                "name": "Check Variable"
                            },
                            {
                                "source": "vkigl",
                                "type": "true",
                                "name": "Call Command/Event"
                            }
                        ],
                        "name": "Loop Through List"
                    },
                    {
                        "anchorName": "take-action",
                        "name": "Go To Action Anchor"
                    },
                    {
                        "name": "End Action Sequence"
                    },
                    {
                        "anchorName": "take-action",
                        "name": "Action Anchor"
                    },
                    {
                        "member": "2",
                        "varName": "author",
                        "dataName": "spam-counter",
                        "changeType": "1",
                        "value": "1",
                        "name": "Control Member Data"
                    },
                    {
                        "member": "2",
                        "varName": "author",
                        "dataName": "spam-counter",
                        "comparison": "4",
                        "value": "2",
                        "branch": {
                            "iftrue": "4",
                            "iffalse": "0",
                            "iftrueVal": "timeout"
                        },
                        "name": "Check Member Data"
                    },
                    {
                        "storage": "1",
                        "varName": "message",
                        "reason": "Werbung",
                        "name": "Delete Message"
                    },
                    {
                        "channel": "5",
                        "varName": "channel",
                        "message": "${tempVars(\"author\")} dieser Link ist nicht freigegeben. Bitte versende ihn zuk端nftig nicht mehr.\nWenn du denkst, dass f端r diese Webseite eine Ausnahme hinzugef端gt werden sollte, erstelle bitte ein Issue auf [GitHub](${globalVars(\"github-link\")}) oder wende dich ggf. an ein Teammitglied.\n\nEin paar erlaubte Links sind in `/link` hinterlegt.",
                        "buttons": [],
                        "selectMenus": [],
                        "attachments": [],
                        "embeds": [],
                        "reply": false,
                        "ephemeral": false,
                        "tts": false,
                        "overwrite": false,
                        "dontSend": false,
                        "editMessage": "0",
                        "editMessageVarName": "",
                        "storage": "0",
                        "varName2": "",
                        "name": "Send Message"
                    },
                    {
                        "name": "End Action Sequence"
                    },
                    {
                        "anchorName": "timeout",
                        "name": "Action Anchor"
                    },
                    {
                        "member": "2",
                        "varName": "author",
                        "time": "1 * 60 * 60",
                        "reason": "Werbung",
                        "name": "Timeout Member"
                    },
                    {
                        "storage": "1",
                        "varName": "message",
                        "reason": "Werbung",
                        "name": "Delete Message"
                    },
                    {
                        "member": "2",
                        "varName": "author",
                        "dataName": "spam-counter",
                        "changeType": "0",
                        "value": "0",
                        "name": "Control Member Data"
                    }
                ]
            },
            "name": "Check Variable"
        }
    ]
}